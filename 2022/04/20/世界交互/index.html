<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="什么是物理系统若是模拟移动和碰撞，需要使用所有的数学公式来计算对象上的接触和力。但需要编写很多复杂的代码。由于物理定律是相同的，因此可以抽象处代码在所有游戏中共享：这就是物理系统的功能。Unity有一个内置的物理系统，可以计算对象的移动和碰撞。为避免我们对游戏对象中的每个对象进行成本高昂的数学运算，">
    

    <!--Author-->
    
        <meta name="author" content="John Doe">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="世界交互(1)"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="c-an"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    
        <meta name="twitter:card" content="summary" />
    
    
    

    <!-- Title -->
    
    <title>世界交互(1) - c-an</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/style.css">


    <!-- Google Analytics -->
    


<meta name="generator" content="Hexo 6.1.0"></head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/tags">
                    Tags
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/categories">
                    Categories
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
    </div>
</header>

        <section class="main">
            
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/2022/04/20/%E4%B8%96%E7%95%8C%E4%BA%A4%E4%BA%92/">
                世界交互(1)
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-04-20</span>
            
            
            
        </div>
    </div>

    <div class="content">

        <!-- Gallery -->
        

        <!-- Post Content -->
        <h1 id="什么是物理系统"><a href="#什么是物理系统" class="headerlink" title="什么是物理系统"></a>什么是物理系统</h1><p>若是模拟移动和碰撞，需要使用所有的数学公式来计算对象上的接触和力。但需要编写很多复杂的代码。由于物理定律是相同的，因此可以抽象处代码在所有游戏中共享：这就是物理系统的功能。Unity有一个内置的物理系统，可以计算对象的移动和碰撞。<br><br></br><br>为避免我们对游戏对象中的每个对象进行成本高昂的数学运算，Unity仅对附有Rigidbody 2D组件中的游戏对象执行这些计算</p>
<hr>
<h3 id="最基础的两个组件"><a href="#最基础的两个组件" class="headerlink" title="最基础的两个组件"></a>最基础的两个组件</h3><ul>
<li>Rigidbody 2D</li>
<li>Box Collider 2D (如果碰撞的时候很奇怪，明明没碰到之类就产生效果了，可以点击Edit Collider，调整游戏对象产生效果的框框)</li>
</ul>
<h3 id="关于解决旋转"><a href="#关于解决旋转" class="headerlink" title="关于解决旋转"></a>关于解决旋转</h3><ul>
<li>Rigidbody 2D&gt;Constrains(约束)&gt;Freeze Roation Z<br>旋转时其实是沿着屏幕的z轴旋转的，把这个旋转给关闭了</li>
</ul>
<h3 id="关于解决抖动"><a href="#关于解决抖动" class="headerlink" title="关于解决抖动"></a>关于解决抖动</h3><ul>
<li>移动使用了Transform这样一个变换组件，变化组件并不会考虑碰撞的影响，它只会考虑让它移动的位置。给一个position，就会移动到position。</li>
</ul>
<p>先检测移动，再生效物理引擎<br>每一次移动到碰撞体内，刚体和碰撞体会把它挤出来。进来和出去这种方式，使它不停颤动。结论：Transform这种移动方式，不适合碰撞体。</p>
<p><strong>刚体本身也有一个移动位置的方法</strong></p>
<ul>
<li>前提：</li>
<li>1.因为默认情况下，所有游戏对象都具有一个Transform组件，所以Unity使Transform变量再所有脚本中都可用。但是，必须将Rigidbody组件手动添加到游戏对象，因为Unity并没有将这个变量作为内置变量。</li>
<li>2.物理系统的更新速度与游戏不同。每次游戏计算图像时都会调用Update，问题是调用速度不稳定。</li>
<li>3.为使物理计算保持稳定，需要定期更新（例如，每隔16ms）。Unity有一个名为FixedUpdate的函数，只要你想要直接影响物理组件或对象（例如刚体），就需要使用该函数。<br><br></br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">public class RubyController : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    //声明刚体对象</span><br><span class="line">    Rigidbody2D rigidbody2D;</span><br><span class="line">    //获取用户输入</span><br><span class="line">    float horizontal;</span><br><span class="line">    float vertical;</span><br><span class="line"></span><br><span class="line">    //将速度暴露出来，使其可调</span><br><span class="line">    public float speed = 0.1f;</span><br><span class="line"></span><br><span class="line">    private void Start() &#123;</span><br><span class="line">        //获取当前游戏对象的刚体组件</span><br><span class="line">        rigidbody2D = GetComponent&lt;Rigidbody2D&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // Update is called once per frame</span><br><span class="line">    //每帧调用一次Update</span><br><span class="line">    //让游戏对象每帧右移0.1</span><br><span class="line">    void Update() &#123;</span><br><span class="line">        //获取水平输入，按向左，会获得-1.0f；按向右，会获得1.0f</span><br><span class="line">        horizontal = Input.GetAxis(&quot;Horizontal&quot;);</span><br><span class="line">        //获取垂直输入，按向下，会获得-1.0f；按向上，会获得1.0f</span><br><span class="line">        vertical = Input.GetAxis(&quot;Vertical&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //固定时间间隔执行的更新方法</span><br><span class="line">    private void FixedUpdate() &#123;</span><br><span class="line">        //获取当前对象位置</span><br><span class="line">        Vector2 position = transform.position;</span><br><span class="line">        //更改位置</span><br><span class="line">        position.x = position.x + 0.1f * horizontal;</span><br><span class="line">        position.y = position.y + 0.1f * vertical;</span><br><span class="line">        //新位置给游戏参数</span><br><span class="line">        rigidbody2D.position = position;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
FixedUpdate 0.02s执行一次（也可以在Edit&gt;Project Setting里改），Update不同硬件运行的频率不一样。如果电脑还可以，建议把获取用户输入放到Update里。</li>
</ul>
<hr>
<ul>
<li>在Tilemap设置碰撞体的简单方式是修改Collider Type</li>
<li>如果是Rule Tile需要在Tiling Rules里对每个小的进行修改Collider<br><br></br><h2 id="优化瓦片地图碰撞体"><a href="#优化瓦片地图碰撞体" class="headerlink" title="优化瓦片地图碰撞体"></a>优化瓦片地图碰撞体</h2>正如在Scene视图中看到的，每个瓦片都是一个单独的碰撞体。<br>这会产生两个问题：</li>
<li>物理系统计算量大：如果世界很大，会减慢游戏速度</li>
<li>在瓦片之间的边界上会产生小问题：由于瓦片是两个并排的碰撞体,并且两者之间存在微小间隙，因此有时计算上的微小误差也可能会导致发生碰撞的罕见现象。</li>
</ul>
<p>为了解决以上的问题，Unity提供一个名为Composite Collider 2D的组件。此组件可以获取对象（或者对象的子对象）上的所有碰撞体，并由此创建一个大碰撞体。（虽然有碰撞体的绿框，但是是整体一个大的）</p>
<p>让我们来添加并配置此组件：</p>
<ul>
<li>1.在Hierarchy中，选择Tilemap游戏对象</li>
<li>2.在Inspector中，单击Add Component按钮</li>
<li>3.搜索“Composite Collider 2D”，然后选择此组件</li>
</ul>
<p><em><strong>你会看到自动添加Rigidbody 2D组件，因为符合碰撞体需要Rigidbody 2D才能正常运行。</strong></em></p>
<ul>
<li>4.在Tilemap Collider 2D组件中，启用Used By Composite复选框</li>
<li>5.为了提升游戏性能，在Rigidbody 2D组件中，将Rigidbody Body Type属性设置为Static<br>将此属性设置为Static将阻止你的世界移动，此外还有助于物理系统的优化计算，因为它知道刚体不能移动。</li>
</ul>

    </div>

    

    

    <!-- Comments -->
    

</div>
        </section>

    </div>
</div>


</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    This theme was developed by <a target="_blank" rel="noopener" href="https://github.com/klugjo">Jonathan Klughertz</a>. The source code is available on Github. Create Websites. Make Magic.
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2022/04/21/%E5%AE%8C%E5%96%84%E8%A7%A6%E5%8F%91%E5%99%A8%E4%BB%A3%E7%A0%81/">完善触发器代码</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/04/21/%E4%B8%96%E7%95%8C%E4%BA%A4%E4%BA%92%EF%BC%882%EF%BC%89/">世界交互（2）</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/04/20/%E4%B8%96%E7%95%8C%E4%BA%A4%E4%BA%92/">世界交互(1)</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/04/20/%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E5%9B%BE%E5%BD%A2%E6%8E%92%E5%BA%8F/">场景中的图形排序</a>
            </li>
            
        </ul>
    </div>



            
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://github.com/klugjo/hexo-theme-alpha-dust">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://twitter.com/?lang=en">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://www.facebook.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://www.instagram.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://dribbble.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://telegram.org/">
                            <span class="footer-icon-container">
                                <i class="fa fa-telegram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://www.behance.net/">
                            <span class="footer-icon-container">
                                <i class="fa fa-behance"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://500px.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-500px"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:test@example.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a target="_blank" rel="noopener" href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->

<script src="/js/main.js"></script>


<!-- Disqus Comments -->



</body>

</html>