<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    

    <!--Author-->
    
        <meta name="author" content="John Doe">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="c-an"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="c-an"/>

    <!--Type page-->
    
        <meta property="og:type" content="website" />
    

    <!--Page Cover-->
    

    
        <meta name="twitter:card" content="summary" />
    
    
    

    <!-- Title -->
    
    <title>c-an</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/style.css">


    <!-- Google Analytics -->
    


<meta name="generator" content="Hexo 6.1.0"></head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/tags">
                    Tags
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/categories">
                    Categories
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
            <h1 id="main-title" class="title">c-an</h1>
        
    </div>
</header>

        <section class="main">
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/28/%E5%83%8F%E7%B4%A0%E7%94%BB%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
                像素画学习笔记
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-28</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="明暗五调子"><a href="#明暗五调子" class="headerlink" title="明暗五调子"></a>明暗五调子</h1><ul>
<li>高光</li>
<li>亮面</li>
<li>明暗交界线</li>
<li>反光（不受单一光源）</li>
<li>投影</li>
</ul>
<hr>
<ol>
<li>绘制造型外轮廓</li>
<li>确定明暗交界线与投影</li>
<li>表达反光和高光</li>
<li>亮面增加层次增加细节</li>
</ol>
<h1 id="质感"><a href="#质感" class="headerlink" title="质感"></a>质感</h1><p>一个半透明的球，其受光面会变暗，背光面会变亮，反光会变得更亮更通透。画面的重点是高光和反光。</p>
<p>我们可以想像光线透过物体照射到了底部，底部的光又反射回来再物体内部形成渐变。</p>
<blockquote>
<p>对于不透明的物体来说，高光始终为最亮。受光面的亮度大于反光大于背光面。<br>对于半透明物体来说，反光的亮度大于背光面大于受光面。</p>
</blockquote>
<blockquote>
<p>为了体现复杂的光影，可以在表面绘制更多因折射而形成的光影</p>
</blockquote>
<p><br></br><br>透明质感几乎无法参考一般明暗五调子的分布情况，夸张地说透明质感更多是在画周围的环境。白色环境下，透明的球体大部分为白色，但是由于不受严格意义上的透明，光影还是参考部分半透明的质感</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/28/3D%E5%90%8E%E6%9C%9F%E7%89%B9%E6%95%88%E6%B7%BB%E5%8A%A0%E7%8E%AF%E5%85%89%E9%81%AE%E6%8C%A1%EF%BC%8C%E9%95%9C%E5%A4%B4%E5%A4%B1%E7%9C%9F%EF%BC%8C%E6%B8%90%E6%99%95-11/">
                3D后期特效添加环光遮挡，镜头失真，渐晕-11
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-28</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="环境光遮挡（Post-process-Volume特效）"><a href="#环境光遮挡（Post-process-Volume特效）" class="headerlink" title="环境光遮挡（Post-process Volume特效）"></a>环境光遮挡（Post-process Volume特效）</h1><p>Ambient Occlusion（环境光遮挡）：使角落和裂缝这些光线未达到的地方变暗</p>
<ol>
<li>在“Add effect”添加Ambient Occlusion后，首先也是吧第一行的on开始，让所有的效果都打开（离谱，这个快捷键对我没用吗，我还是得一个个勾上才生效…抱歉，说错了，不是on啊，是All）</li>
<li>更改Intensity（强度）的数值</li>
<li>Tickness Modifier（更改暗影的面积，使它周围出现像暗影一样的光晕，向四周散射吧）</li>
</ol>
<h1 id="渐晕（摄像头特效）"><a href="#渐晕（摄像头特效）" class="headerlink" title="渐晕（摄像头特效）"></a>渐晕（摄像头特效）</h1><p>渐晕效果使摄像机镜头本身的边缘变暗。</p>
<p>模拟真实世界相机镜头中由厚的或堆叠的滤镜、辅助镜头或不合适镜头遮光罩引起的效果，把注意力吸引到图像中间。</p>
<ol>
<li>“Add effect”&gt;Unity&gt;Vignette</li>
<li>Intensity：确定效果在屏幕上散布的距离</li>
<li>Smoothing：朝向屏幕中心淡入淡出的距离</li>
</ol>
<h1 id="镜头失真（LensDistortion）"><a href="#镜头失真（LensDistortion）" class="headerlink" title="镜头失真（LensDistortion）"></a>镜头失真（LensDistortion）</h1><ol>
<li>“Add effect”&gt;Unity&gt;Lens Distortion</li>
</ol>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/27/3D%E5%90%8E%E6%9C%9F%E5%A4%84%E7%90%86%E4%BD%93%E7%A7%AF-%E6%B7%BB%E5%8A%A0%E9%A2%9C%E8%89%B2%E5%88%86%E7%BA%A7-%E6%B3%9B%E5%85%89-10/">
                3D后期处理体积&添加颜色分级&泛光-10
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-27</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <ol>
<li>先在Hierarchy中，右键创建一个新的空的游戏对象，给它命名为“GlobalPost”（全局后期），将这个游戏对象的层设置成上一次设置好的8-后期处理层。</li>
<li>再在这个游戏对象中，添加“Post-process Volume”（体积组件）</li>
<li>把Potation定位到原点</li>
<li>把它作为全局，把它的体积组件（Post-process Volume）中的Is Global勾选框勾上</li>
<li>体积组件中的Profile是配置文件，现在还没有，New一个，它会自动创建在Scenes文件夹里，和当前Scene文件夹名字相同的一个文件夹里。然后在体积组件里，”Add effect”添加不同的特效，存储到配置中，最终生效到场景里</li>
</ol>
<h1 id="颜色分级（Color-Grding）效果"><a href="#颜色分级（Color-Grding）效果" class="headerlink" title="颜色分级（Color Grding）效果"></a>颜色分级（Color Grding）效果</h1><p>颜色分级用于更改被渲染视图的亮度、对比和颜色。改功能类似于在照片编辑软件或Instagram中应用滤镜。</p>
<p>通过颜色分级，可以让图像显示出不同的情境范围，比如：BBC的阴间滤镜效果</p>
<p><strong>颜色分级效果</strong>这个也是特效，用”Add effect”添加</p>
<ol>
<li>“Add effect”&gt;Unity&gt;Color Grading,然后自己配置</li>
<li>首先，勾选“Tonemapping”（色调用色），选择模式为ACES</li>
<li>勾选“Post-exposure（EV）”，改为1，曝光，让它变得更亮一些</li>
<li>Trackballs（轨迹球）改变场景的颜色，左边的lift是影响阴影的颜色，Gain会更改最亮的高光，Gamma涵盖图像中间的所有内容</li>
</ol>
<h1 id="泛光特效（Bloom-Effect）"><a href="#泛光特效（Bloom-Effect）" class="headerlink" title="泛光特效（Bloom Effect）"></a>泛光特效（Bloom Effect）</h1><p>添加泛光（Bloom）效果可以使光源具有良好的发光效果，它会创建从图像中明亮区域延伸的光条纹。这模拟了真实世界的相机在光线淹没镜头时所产生的效果</p>
<ol>
<li>“Add effect”&gt;Unity&gt;Bloom</li>
<li>首先把所有的属性打开，第一行选择“on”</li>
<li>Intensity是泛光的强度，把0改成2</li>
<li>Threshold是门槛，就是超过这个设置数值的光源，可以使用Bloom，改成0.75</li>
</ol>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/26/3D%E5%90%8E%E6%9C%9F%E7%89%B9%E6%95%88%E7%AE%80%E4%BB%8B-%E6%B7%BB%E5%8A%A0%E6%8A%97%E9%94%AF%E9%BD%BF-9/">
                3D后期特效简介&添加抗锯齿-9
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-26</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h2 id="后期处理简介"><a href="#后期处理简介" class="headerlink" title="后期处理简介"></a>后期处理简介</h2><p>Unity提供了许多后期处理效果和全屏效果，可以用很少的设置时间来大大改观应用程序的外观。可以使用这些效果模拟物理摄像机和胶片属性，或创建风格化的视觉效果。</p>
<p>可用的后期处理效果和这些效果的应用方式取决于所使用的渲染管线。一个渲染管线的后期处理解决方案与其他渲染管线不兼容</p>
<p>后期处理效果组是称为后期处理配置文件（Post-processing Profiles）的资源。分配了配置文件的游戏世界区域是称为后期处理体积（Post Process Volums）的组件</p>
<p>有时，不同的摄像机具有不同的后期处理。为了将一个处理效果组链接到待定摄像机，需要将Post Layer组件添加到与Camera组件相同的游戏对象。层（Layer）是一种按行为组织游戏对象的方法。</p>
<h2 id="渲染管线简介"><a href="#渲染管线简介" class="headerlink" title="渲染管线简介"></a>渲染管线简介</h2><h3 id="render-pipeline概念"><a href="#render-pipeline概念" class="headerlink" title="render pipeline概念"></a>render pipeline概念</h3><p>渲染管线执行一系列操作来获取场景中的内容，并将这些内容显示在屏幕上。</p>
<p>说白了，就是：通过不同的配置方法和算法，最终将图像图形显示在屏幕上的功能模块</p>
<h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><p>有不同分类存在的理由是：为了适配不同性能档次的硬件</p>
<p>分类：</p>
<ul>
<li>内置渲染管线是Unity的默认渲染管线。这是通用的渲染管线，其自定义选项有限</li>
<li>通用渲染管线（URP-Universal Render Pipeline）是一种可快速轻松自定义的可编程渲染管线，允许您在各种平台上创建优化的图形</li>
<li>高清渲染管线（HDR-为High Definition Render Pipeline）是一种可编程渲染管线，可在高端平台上创建出色的高保真图形</li>
<li>可用使用Unity的可编程渲染管线（SRP-Scriptable Render Pipeline）API来创建自定义渲染管线</li>
</ul>
<h2 id="着色器（shader）"><a href="#着色器（shader）" class="headerlink" title="着色器（shader）"></a>着色器（shader）</h2><p>是在图形处理单元（GPU）上运行的程序或者程序集合的通用名称。例如，在剔除阶段完成后，顶点着色器用于将可见对象的顶点坐标从“对象空间”转到“裁剪空间”的不同空间；然后GPU使用这些新的坐标对场景进行光栅化，也就是将场景的矢量表示转化为实际像素。在稍后阶段，这些像素将由<br>像素着色器着色；像素颜色通常取决于各自表面的材质属性以及周围的光照。现代硬件上另一种常见的着色器是计算着色器；计算着色器允许GPU的大量并行处理能力，用于任何类型的数学运算，如光照剔除、粒子物理或体积模拟。</p>
<h2 id="直接光照"><a href="#直接光照" class="headerlink" title="直接光照"></a>直接光照</h2><h2 id="间接光照"><a href="#间接光照" class="headerlink" title="间接光照"></a>间接光照</h2><p>是由于光从表面反射并通过介质（如大气或半透明物质）传播和散射形成的结果。在这种状况下，遮挡物通常投射出柔和或难以看清的阴影</p>
<h2 id="全局光照（GI）"><a href="#全局光照（GI）" class="headerlink" title="全局光照（GI）"></a>全局光照（GI）</h2><p>是对直接光照和间接光照进行建模以提供逼真光照的一组技术。GI有几种方法，如烘培&#x2F;动态光照贴图、辐照度体积、光传播体积、烘培&#x2F;动态光照。体素的GI和基于距离场的GI。Unity之处开箱即用的烘培&#x2F;动态光照贴图和光照探灯。</p>
<h2 id="光照贴图程序"><a href="#光照贴图程序" class="headerlink" title="光照贴图程序"></a>光照贴图程序</h2><p>是一个基础系统，它通过发射光线、计算光线反弹并将产生的光线应用到纹理来生成光照贴图和光照探灯的数据。因此，不同的光照贴图程序通过不同的光照外观，因为它们可能依赖于不同的技术来生成光照数据。</p>
<h1 id="添加抗锯齿"><a href="#添加抗锯齿" class="headerlink" title="添加抗锯齿"></a>添加抗锯齿</h1><ol>
<li>添加新的后期处理层</li>
<li>选择要处理的摄像机，为摄像机游戏对象添加Post Process Layer组件，并配置刚才新添加的层到组件的Layer上</li>
<li>在后期处理层Post Process Layer组件上，通过配置属性，可选择添加抗锯齿等后期处理效果</li>
</ol>
<hr>
<p>eg.为Main Camera添加一个新的层，命名为“PostProcessingVolumes”，再为它添加组件“Post Process Layer”，把这个组件中的Layer改成刚才为摄像机添加的层。然后打开抗锯齿的功能，抗锯齿就是“Anti-aliasing”，选择比较简单的FXAA，把Fast Mode打开</p>
<blockquote>
<p>这是针对摄像头的，只选择玩家看到的区域进行抗锯齿，节省资源、提高性能</p>
</blockquote>
<blockquote>
<p>Post-process Layer设置物、抗锯齿使用的<br>Post-process Volume添加视觉光影和摄像机特效</p>
</blockquote>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/25/3D%E4%BD%BF%E7%94%A8Cinemachine%E6%9E%84%E5%BB%BA3D%E6%91%84%E5%83%8F%E6%9C%BA%E8%B7%9F%E9%9A%8F-8/">
                3D使用Cinemachine构建3D摄像机跟随-8
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-25</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>Cinemachine&gt;Create Virtual Camera（以前做2D的时候用的是Create 2D Camera）</p>
<p>创建好了虚拟摄像机，要跟随玩家，直接把Hierarchy中的玩家角色拖到虚拟射线机CinemachineVirtualCamera的Follow中就好了</p>
<blockquote>
<p>Aim是调整转向的，这里不需要调整转向，把Aim后选中Do nothing（因为是Follow，所以是Do nothing）<br>把虚拟摄像机中的Body改成Framing Transposer（可以为虚拟摄像机提供关于其Follow目标必须在屏幕上所处的位置的规则，从而控制虚拟摄像机的位置）（蓝色是核心的区域，黄色是定位点）</p>
</blockquote>
<blockquote>
<p>为了让摄像机离主角近一点，选中摄像机，Body&gt;Camera Distance更改为8（随意）</p>
</blockquote>
<h1 id="Cinemachine在3D游戏中的使用"><a href="#Cinemachine在3D游戏中的使用" class="headerlink" title="Cinemachine在3D游戏中的使用"></a>Cinemachine在3D游戏中的使用</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>Cinemachine是一套用于操作Unity摄像机的模块。Cinemachine解决了跟踪目标、合成、混合镜头之间剪切的复杂数学和逻辑。它旨在显着减少开发过程中发生的耗时的手动操作和脚本修订的数量。</p>
<p>这些模块的纯虚性质使Cinemachine具有抗错误性。调整（例如，更改场景中的动画、车辆速度、地形或其他游戏对象）时，Cinemachine会动态调整其行为以制作最佳镜头。例如，没有必要仅仅因为角色向左转而不是向右转而重新编写相机脚本。</p>
<p>Cinemachine可在所有类型（包括FPS、第三人称、2D、横向卷轴、自上而下和RTS）中实时运行。可以在场景中支持任意数量的镜头。模块化系统可以来组合复杂的行为。</p>
<p>Cinemachine与其他Unity工具配合良好，可作为时间轴、动画和后期处理资产的强大补充。创建自己的扩展将与自定义相机脚本集成。</p>
<h2 id="Cinemachine的虚拟摄像机"><a href="#Cinemachine的虚拟摄像机" class="headerlink" title="Cinemachine的虚拟摄像机"></a>Cinemachine的虚拟摄像机</h2><p>Chinemachine不会创建新的摄像机。相反，它会引导单个Unity进行拍摄。可以使用虚拟相机构图成这些镜头。虚拟摄像机移动和旋转Unity相机并控制其设置。</p>
<p>虚拟摄像机是独立与Unity摄像机的独立游戏对象，并独立运行，它们不相互嵌套</p>
<p>虚拟摄像机的主要任务：</p>
<ul>
<li>在场景中定位Unity摄像机</li>
<li>将Unity相机对准某物</li>
<li>向Unity相机中添加程序噪声。噪声模拟诸如手持效果或车辆抖动之类的东西。</li>
</ul>
<p>Cinemachine鼓励创建多个虚拟摄像机。虚拟摄像机旨在消耗很少的处理能力。如果对场景的性能很敏感，请在任何给定时刻停用除基本虚拟摄像机以外的所有摄像机以获得最佳性能。</p>
<p>建议使用单个虚拟摄像机进行单次拍摄。利用这一点来创建戏剧性或微妙的切割或混合</p>
<h2 id="Cinemachine-Brain"><a href="#Cinemachine-Brain" class="headerlink" title="Cinemachine Brain"></a>Cinemachine Brain</h2><p>如其名称，是操纵所有虚拟的Cinmachine摄像机的大脑</p>
<p>使用Cinmachine Brain实时响应动态游戏事件。它允许游戏逻辑通过操纵优先级来控制摄像机（自动）</p>
<p>也可以手动使用事件轴在可预测的情况下编排摄像机，例如过场动画。</p>
<h2 id="移动和瞄准"><a href="#移动和瞄准" class="headerlink" title="移动和瞄准"></a>移动和瞄准</h2><p>使用Virtual Camera中的Body属性指定如何在场景中移动它。使用Aim属性指定如何旋转它</p>
<p>虚拟摄像机有两个目标：</p>
<ul>
<li>在跟踪目标指定虚拟相机与移动游戏物体</li>
<li>在查找目标指定游戏对象瞄准</li>
</ul>
<p>Cinemachine 包括各种程序算法来控制移动和瞄准。每个算法都解决一个待定的问题，并根据您特定需求自定义算法的属性。Cinmaechine将这些算法实现，为CinemachineComponent对象。使用CinemachineComponent该类来实现自定义移动或瞄准行为。</p>
<h2 id="Cinemachine使用简介"><a href="#Cinemachine使用简介" class="headerlink" title="Cinemachine使用简介"></a>Cinemachine使用简介</h2><ul>
<li>在场景中创建一个或多个虚拟摄像机</li>
<li>使用Follow属性指定要跟随的GameObject；使用Look At属性指定虚拟摄像机应该瞄准的游戏对象</li>
<li>Cinemachine Brain与Camera组件连接到相同的游戏对象，默认情况下，这个游戏对象将是Main Camera游戏对象</li>
<li>Cinemachine Brain管理所有虚拟摄像机，并确定实际摄像机应该跟随哪个虚拟摄像机（或摄像机的组合）</li>
</ul>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/24/3DNavMesh%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F-7/">
                3DNavMesh导航系统-7
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-24</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="NavMesh导航网格实现简单AI"><a href="#NavMesh导航网格实现简单AI" class="headerlink" title="NavMesh导航网格实现简单AI"></a>NavMesh导航网格实现简单AI</h1><p>导航系统允许从场景几何体自动创建的导航网格来创建课再游戏世界中智能移动的角色，动态障碍物可以在运行时更改角色的导航，而网格外链接（Off-Mesh Link）可以构建特定的动作，如打开门或从窗台跳下。</p>
<h1 id="Unity中的导航系统组成"><a href="#Unity中的导航系统组成" class="headerlink" title="Unity中的导航系统组成"></a>Unity中的导航系统组成</h1><ol>
<li>导航网格（即Navigation Mesh，缩写为NavMesh），是一种数据结构，用于描述游戏世界的可行走表面，并允许在游戏世界中寻找一个可行走位置到另一个可行走位置的路径。该数据结构是从关卡几何体自动构建或烘培的。</li>
<li>导航网格代理（NavMesh Agent）组件：可用来创建朝目标角色移动时能彼此避开的角色。代理使用网络导航来推断游戏世界，并知道如何避开彼此以及移动的障碍物。</li>
<li>网格外链接（Off-Mesh Link）组件：允许合并无法使用可行走表面来表示的导航捷径。例如，跳过沟渠或围栏，或在通过门之间打开门，全都可以描述为导航外链接。</li>
<li>导航网格障碍物（NavMesh Obstacle）组件：可用于描述代理在世界中导航时应该避开的障碍物，由物理系统控制的木桶或是板条箱便是障碍物的典型例子。障碍物正在移动时，代理将尽力避开它，障碍物一旦变为静止状态，便会在导航网格中雕刻一个孔，从而使代理能够改变自己的路径来绕过它，或者如果静止的障碍物阻挡了路径，则代理可寻找其他不同的路线。</li>
</ol>
<h1 id="添加导航网格"><a href="#添加导航网格" class="headerlink" title="添加导航网格"></a>添加导航网格</h1><p>导航网格（NavMesh）是在地面上不可见的形状，定义了一个可以让选定游戏对象在其中移动的区域。</p>
<p>当某个对象表示为Static时，Unity的导航系统会认为该游戏对象不会移动。游戏环境由许多对象和许多Mesh Render（网格渲染器）组件组成。来自Mesh Renderer组件（其游戏对象被标记为Static）的所有网格将组合构成导航网格的基础</p>
<p>步骤：</p>
<ol>
<li>在level中，配置需要设置导航网格的游戏对象为Static（level是一个例子，选选中游戏对象，在Inspector勾选static即可）</li>
<li>烘培导航网格：选择Window&gt;AI&gt;Navigation以打开Navigation窗口&gt;选择Bake选项卡</li>
</ol>
<hr>
<p>游戏对象是被Mesh Renderer（网格渲染器）,渲染出来的，渲染出来的网格同时也可用作导航网格（NavMesh），静态的适合做导航网格</p>
<h1 id="关于Navigation"><a href="#关于Navigation" class="headerlink" title="关于Navigation"></a>关于Navigation</h1><ul>
<li>Agents是应用到哪些物理上的设置</li>
<li>Areas 是设置导航区域</li>
<li>Bake是烘培，把当前设置好的导航网格建立到场景中</li>
</ul>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/21/%E3%80%8ACunning-Angel%E3%80%8B/">
                《Cunning Angel》
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-21</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="《Cunning-Angle》"><a href="#《Cunning-Angle》" class="headerlink" title="《Cunning Angle》"></a>《Cunning Angle》</h1><blockquote>
<p>中文名：狡黠天使<br>游戏类型：剧情解密游戏</p>
</blockquote>
<h1 id="背景设定"><a href="#背景设定" class="headerlink" title="背景设定"></a>背景设定</h1><p>这里是流刑地，除你之外，有两个看守你的人。</p>
<p>前2202年，5月21日，12点零05分。</p>
<p>停滞的时间、死亡的恒星、漫天飞舞的黄沙、难以用人体感知系统去察觉的温度…</p>
<p>拼凑的天空中回响着断断续续、割离虚裂的诡异声音，封闭的空间、狭小的世界。</p>
<p>不要留下来，但要如何离开？</p>
<h1 id="角色设定"><a href="#角色设定" class="headerlink" title="角色设定"></a>角色设定</h1><blockquote>
<p>石榴–沙漠星空的看守者，足边缠绕着九头蛇。无感知系统，变温物。<br>塞涅–摇光海岸的看守者，听觉异常敏感。</p>
</blockquote>
<h1 id="物品道具"><a href="#物品道具" class="headerlink" title="物品道具"></a>物品道具</h1><ol>
<li>迷途碎片–“磁性物质，对稳定电波有一定的作用”</li>
<li>沙漠之火–“永恒不变的温度，36.5℃，蓝紫色火焰”</li>
<li>星屑–“死亡恒星上飘落下的碎片，易溶于水”</li>
<li>竖琴–“”</li>
</ol>
<h1 id="场景地图"><a href="#场景地图" class="headerlink" title="场景地图"></a>场景地图</h1><ol>
<li><p>沙漠星空–“气体系数低，平衡系数高。沙漠上的温度在较高的范围内小幅度波动，直到随海波上升至某一临界点，温度急剧下降并并维持低温。”</p>
</li>
<li><p>摇光海岸–“气体系数高，平衡系数无限接近0。摇光海岸的海水是不流动的，但因海水的纯度极高，仅由一种无机盐构成，这里洁净如镜。”</p>
</li>
<li><p>无尽回廊</p>
</li>
<li><p>白色房间</p>
</li>
</ol>
<h1 id="游戏模式"><a href="#游戏模式" class="headerlink" title="游戏模式"></a>游戏模式</h1><p>游戏以探索为主，以故事情节为核心，以第三人称视角进行，通过收集道具和探索场景，玩家发现总结，逐步认知到“流刑地”存在的无意义、不合理。利用世界规则的漏洞，制造混乱，打破建立于虚无中的平衡，使“流刑地”趋向于“不存在”。</p>
<h1 id="成就系统"><a href="#成就系统" class="headerlink" title="成就系统"></a>成就系统</h1><h1 id="解说与攻略"><a href="#解说与攻略" class="headerlink" title="解说与攻略"></a>解说与攻略</h1><p>石榴与塞涅各自代表混沌的沙漠与死亡的海水。</p>
<p>流刑地虽然是被“世界”这个系统创造的，但是是随机生成的。没有完美的规则，必有被攻击的破绽。</p>
<p>就连石榴和塞涅也是这个系统的产物，一成不变的思维，偏执、固执。</p>
<p>这里，没有时间的概念，这里，没有生存的意义。</p>
<p>因为是被设计好的规则，所以有必然得到的答案。</p>
<p>背景设定是随机数，流刑地是随机数，这里的一切以随机的数字来衡量。</p>
<h3 id="生物与死物"><a href="#生物与死物" class="headerlink" title="生物与死物"></a><strong>生物与死物</strong></h3><p>拾起一颗沙，松手它会做下坠的运动，这是名为重力的反应</p>
<p>割开仙人球，挤压它会流出粘液，这是名为渗透的反应</p>
<p>石榴呢，你的应激反应是什么？如何证明你和它们不是一类的生物？</p>
<h3 id="虚无与存在"><a href="#虚无与存在" class="headerlink" title="虚无与存在"></a><strong>虚无与存在</strong></h3><p>流刑地不需要额外的屏障，因为生成的世界就是流刑地本身。<br>与其说石榴和塞涅是来看守你的，不如说是在看守自己的行为。</p>
<p>其实你才是流刑地中最自由的，唯一一个来回穿梭沙漠星空与摇光海岸的人。</p>
<p>石榴与塞涅互不认识对方的存在，活动范围仅仅是各自的领地，并将自己的领地作为世界的中心。</p>
<p>两个领地，两种定理体系。</p>
<h1 id="剧本"><a href="#剧本" class="headerlink" title="剧本"></a>剧本</h1><p>-[背景1，自定义]</p>
<pre><code>你，是？

（玩家输入自己的名字）
</code></pre>
<p>[动态背景1，像睁开眼睛那样，背景1上下褪去，此时进入“沙漠星空”]</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/21/3D%E5%9C%BA%E6%99%AF%E5%92%8C%E5%85%89%E7%85%A7-6/">
                3D场景和光照-6
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-21</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="为环境设置光照"><a href="#为环境设置光照" class="headerlink" title="为环境设置光照"></a>为环境设置光照</h1><p>Unity中的光源只是添加了Light组件的游戏对象。光源组件包含一些设置可用于更改光源的颜色和强度，还有光源的“类型”以及各种用于阴影和光照贴图（Lightmapping）的更复杂的控制。</p>
<p>Unity中的每个新场景都分配的<strong>方向光（Directional Light）</strong>，这是默认创建的两个游戏对象之一。</p>
<h1 id="Unity光照相关光源概念简介"><a href="#Unity光照相关光源概念简介" class="headerlink" title="Unity光照相关光源概念简介"></a>Unity光照相关光源概念简介</h1><ul>
<li>直接和间接光照</li>
</ul>
<ol>
<li>直射光是发出后照射到表面一次再被直接反射到传感器（例如眼睛的视网膜或摄像机）中的光</li>
<li>间接光是当直射光从表面反弹时产生的额外光，是最终反射到传感器中的所有其他光线，包括多次照射到表面的光线和天光</li>
</ol>
<p>Unity使用什么直接还是间接光照技术，取决于项目的配置方式</p>
<ul>
<li>实时光照和烘培光照</li>
</ul>
<ol>
<li>实时光照：指Unity在运行时计算光照</li>
<li>烘培光照：指Unity提前执行光照计算并将结果保存为光照数据，然后在运行时应用</li>
<li>混合光照：实时光照、烘培光照两者的混合</li>
</ol>
<p>在Unity中，项目可以使用实时光照、烘培光照或两者的混合（称为混合光照），用来设置光源的模式（Mode）</p>
<h1 id="Unity中的光源类型Type"><a href="#Unity中的光源类型Type" class="headerlink" title="Unity中的光源类型Type"></a>Unity中的光源类型Type</h1><p>光源：为了计算受光照影响的游戏对象的阴影效果，Unity需要知道落在游戏对象上光的强度、方向和颜色。该信息由光源提供。</p>
<ol>
<li>Direction light方向光<br>这种光源位于无限远的位置，比如太阳光</li>
</ol>
<p>方向光对位于在场景中创建诸如阳光的效果非常有用。方向光在许多方面表现得很像太阳光，可视为无限远处的光源。方向光没有任何可识别方向的（？）因此光源对象可以放置在场景中的任何位置。场景中的所有对象都被照亮，就像光线始终来自同一方向一样。光源与目标对象的距离是未定义的，</p>
<p>方向光代表来自游戏世界范围之外的大型远处光源。在逼真的场景中，方向光可用于模拟太阳或月亮，要为对象添加无需指定光源的来源，方向光是一种很有用的方法。</p>
<p>旋转默认方向光（或“太阳”）会导致“天空盒”更新，使光线与侧面成一定角度，与地面平行，便可实现日落效果。此外，将光源指向上方会使天空是夜晚一样。如果光线从上到下成一定角度，天空将像白昼。</p>
<p>如果选择天空盒作为环境光源，那么环境光源将根据这些颜色进行更改。<br>2. Point light点光源<br>光源位于场景中的一个点，并在所有方向上均发光</p>
<p>点光源位于空间中的一个点，并在所有方向上均发光。照射到表面的光线的方向是从接触点返回到光源对象中心的线。强度随着远离光源而衰减。光照强度与距光距离的平方成反比。这被称为“平方反比定律”，类似于光在现实世界中的情况。</p>
<p>点光源可用于模拟场景中的灯和其他局部光源。还可以用来逼真地模拟火花爆炸照亮周围环境。</p>
<ol start="3">
<li>Area light面光源<br>这种光源由场景中的矩形定义，并沿表面区域均匀地向所有方向发光，但仅从矩面所在的面发射</li>
</ol>
<p>面光源是通过空间中的矩形来定义的。光线在表面区域上均匀地向所有方向上发射，但仅从矩形所在的面发射。无法手动控制光源的范围。强度将按照距离的平方呈反比衰减。由于光线计算处理对处理器性能消耗较大，因此面光源不可以实时处理，只能烘培到光照贴图中。</p>
<p>由于面光源同时从几个不同方向照亮对象，因此阴影趋向于比其他类型的光源更细腻、柔和。可以使用面光源来创建逼真的路灯或靠近玩家的一排..光源可以模拟较小的光源（例如室内光照），但效果比点光源更逼真。</p>
<ol start="4">
<li>Spot light聚光灯<br>这种光源位于场景中的一个点，并以锥体形状发光。</li>
</ol>
<p>像点光源一样，聚光灯具有指定的位置和光线衰减范围。不同的是聚光灯有一个角度约束、形成锥形的光照区域。锥体的中心指向光源对象的发光。聚光灯锥体边缘的光线也会衰减。加宽该角度会增加锥体的宽度，并随之增加这种淡化的效果，称为“半影”。</p>
<p>聚光灯通常用于人造光源，例如手电筒、汽车前照灯和探照灯。通过脚本或动画控制方向，移动聚光灯将照亮场景的一小块区域并产生舞台风格的效果。</p>
<h1 id="Light组件"><a href="#Light组件" class="headerlink" title="Light组件"></a>Light组件</h1><p>不同的渲染管线，Unity在Inspector中显示不同的属性。</p>
<h1 id="Lighting窗口"><a href="#Lighting窗口" class="headerlink" title="Lighting窗口"></a>Lighting窗口</h1><p>Lighting窗口（菜单：Window&gt;Rendering&gt;Lighting）是当前项目的总体光照设置。</p>
<p>使用Lighting窗口调整与场景中的光照有关设置，并根据质量、烘培时间和存储空间来优化预计算的光照数据。</p>
<h1 id="Light-Explorer窗口"><a href="#Light-Explorer窗口" class="headerlink" title="Light Explorer窗口"></a>Light Explorer窗口</h1><p>在Light Explorer窗口中可选择和编辑光源。要从菜单中打开Light Explorer窗口，请导航至Window&gt;Rendering&gt;Light Explorer</p>
<h1 id="光照贴图"><a href="#光照贴图" class="headerlink" title="光照贴图"></a>光照贴图</h1><p>光照贴图过程将预先计算场景中表面的亮度，并将结果存储在称为“光照贴图”的纹理中供以后使用。</p>
<h1 id="光照探针"><a href="#光照探针" class="headerlink" title="光照探针"></a>光照探针</h1><p>通过<strong>光照探针</strong>可以捕获并使用穿过场景空白空间的光线相关信息</p>
<p>与光照贴图类似，光照探针存储了有关场景中的光照的“烘培”信息。不同之处在于，光照贴图存储的是有关光线照射到场景中的表面的光照贴图信息，而光照探针存储的是有关光线穿过场景中的空白空间的信息。</p>
<p>光照探针是在烘培期间测量（探测）光照的场景位置。在运行时，系统将使用距离动态游戏对象最近的探针的值来估算照射到这些对象的间接光。</p>
<ul>
<li>用途：</li>
<li>光照探针的主要用途是为场景中移动的对象提供高质量的光照（包括间接反射光）</li>
<li>光照探针的次要用途是在静态景物使用Unity的LOD（细节级别）系统时提供该景物的光照信息。</li>
</ul>
<hr>
<p>下面开始实操：</p>
<blockquote>
<p>更改光照的颜色</p>
</blockquote>
<ol>
<li>在Hierarchy窗口中,选择Directional Light游戏对象</li>
<li>更改Light组件的某些属性值</li>
</ol>
<p>名词介绍:</p>
<ul>
<li>Intensity 亮度</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2020.3/Manual/class-Light.html">光源手册</a></p>
<hr>
<p>配置全局的光照,需要打开Window&gt;Rendering&gt;Lighting</p>
<ul>
<li>Sky,用于控制从场景上方发出的环境光</li>
<li>Equator,用于控制从地平线向场景中间传播的光线</li>
<li>Ground,用于控制从场景下方发出的光线</li>
</ul>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/20/3D%E6%8E%A7%E5%88%B6%E6%97%8B%E8%BD%AC-5/">
                3D控制旋转-5
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-20</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>以下是控制旋转+控制移动的完整代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerMovement : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    //TODO:</span><br><span class="line">    //1. 获取玩家输入，在场景中移动玩家角色游戏对象</span><br><span class="line">    //2. 移动时，除了位置position外，还需要考虑转动rotation</span><br><span class="line">    //3. 需要将动画也考虑进去</span><br><span class="line"></span><br><span class="line">    //创建一个3D矢量，来表示玩家角色的移动</span><br><span class="line">    Vector3 m_Movement;</span><br><span class="line">    //创建变量，获取用户输入的方向</span><br><span class="line">    float horizontal;</span><br><span class="line">    float vertical;</span><br><span class="line"></span><br><span class="line">    //创建一个刚体对象</span><br><span class="line">    Rigidbody m_rigibody;</span><br><span class="line">    //创建一个Animator组件对象</span><br><span class="line">    Animator m_Animator;</span><br><span class="line"></span><br><span class="line">    //用四元数对象 m_Rotaion来表示3D游戏中的旋转</span><br><span class="line">    //初始化四元数对象，初始化为不旋转</span><br><span class="line">    Quaternion m_Rotation = Quaternion.identity;</span><br><span class="line"></span><br><span class="line">    //旋转速度</span><br><span class="line">    public float turnSpeed = 20.0f;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // Start is called before the first frame update</span><br><span class="line">    void Start() &#123;</span><br><span class="line">        //在游戏运行开始后，获取到刚体组件和动画管理者组件</span><br><span class="line">        m_Animator = GetComponent&lt;Animator&gt;();</span><br><span class="line">        m_rigibody = GetComponent&lt;Rigidbody&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Update is called once per frame</span><br><span class="line">    void Update() &#123;</span><br><span class="line">        //获取用户输入</span><br><span class="line">        horizontal = Input.GetAxis(&quot;Horizontal&quot;);</span><br><span class="line">        vertical = Input.GetAxis(&quot;Vertical&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void FixedUpdate() &#123;</span><br><span class="line">        //将用户输入组成3D运动需要的三维矢量</span><br><span class="line">        m_Movement.Set(horizontal, 0.0f,vertical);</span><br><span class="line">        //在移动时，会有动画，动画移动距离和实际距离很有可能不匹配</span><br><span class="line">        //比如动画里迈一大步，实际只移动一点点</span><br><span class="line">        //所以把实际移动距离用以下函数设置为1，不考虑。</span><br><span class="line">        //只考虑动画移动距离</span><br><span class="line">        m_Movement.Normalize();</span><br><span class="line"></span><br><span class="line">        //先判断是否有横向移动,用前面说过的数学的方法</span><br><span class="line">        bool hasHorizontal = !Mathf.Approximately(horizontal, 0.0f);</span><br><span class="line">        bool hasVertical = !Mathf.Approximately(vertical, 0.0f);</span><br><span class="line">        //只要有一个方向移动,就认为玩家角色处于移动状态</span><br><span class="line">        bool isWalking = hasHorizontal || hasVertical;</span><br><span class="line">        //将变量传递给动画管理器</span><br><span class="line">        m_Animator.SetBool(&quot;IsWalking&quot;, isWalking);</span><br><span class="line"></span><br><span class="line">        //用三维矢量来表示转向后玩家角色的朝向</span><br><span class="line">        Vector3 desiredForward = Vector3.RotateTowards(transform.forward, m_Movement, turnSpeed * Time.deltaTime, 0f);</span><br><span class="line"></span><br><span class="line">        //设置四元数对象的值</span><br><span class="line">        //调用Quaternion.LookRotation的静态方法，把三维矢量作为参数传进去</span><br><span class="line">        m_Rotation = Quaternion.LookRotation(desiredForward);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void OnAnimatorMove() &#123;</span><br><span class="line">        //使用从用户输入获取到的三维矢量作为移动方向，使用动画中每次0.02秒移动的距离作为距离来移动</span><br><span class="line">        //m_Animator.deltaPosition.magnitude动画里面每一帧移动的距离</span><br><span class="line">        m_rigibody.MovePosition(m_rigibody.position + m_Movement * m_Animator.deltaPosition.magnitude);</span><br><span class="line"></span><br><span class="line">        //旋转游戏对象</span><br><span class="line">        m_rigibody.MoveRotation(m_Rotation);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2020.3/ScriptReference/Vector3.RotateTowards.html">RotateTowards的脚本API</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2020.3/ScriptReference/Quaternion.LookRotation.html">LookRotation的脚本API</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2020.3/ScriptReference/Quaternion.html">Quaternion的脚本API</a></p>
<blockquote>
<p>当动画播放引发跟移动时执行OnAnimatorMove()</p>
</blockquote>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/19/3D%E6%8E%A7%E5%88%B6%E7%A7%BB%E5%8A%A8-4/">
                3D控制移动-4
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-19</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>以下是控制JohnLemon移动的代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerMovement : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    //TODO:</span><br><span class="line">    //1. 获取玩家输入，在场景中移动玩家角色游戏对象</span><br><span class="line">    //2. 移动时，除了位置position外，还需要考虑转动rotation</span><br><span class="line">    //3. 需要将动画也考虑进去</span><br><span class="line"></span><br><span class="line">    //创建一个3D矢量，来表示玩家角色的移动</span><br><span class="line">    Vector3 m_Movement;</span><br><span class="line">    //创建变量，获取用户输入的方向</span><br><span class="line">    float horizontal;</span><br><span class="line">    float vertical;</span><br><span class="line"></span><br><span class="line">    //创建一个刚体对象</span><br><span class="line">    Rigidbody m_rigibody;</span><br><span class="line">    //创建一个Animator组件对象</span><br><span class="line">    Animator m_Animator;</span><br><span class="line"></span><br><span class="line">    // Start is called before the first frame update</span><br><span class="line">    void Start() &#123;</span><br><span class="line">        //在游戏运行开始后，获取到刚体组件和动画管理者组件</span><br><span class="line">        m_Animator = GetComponent&lt;Animator&gt;();</span><br><span class="line">        m_rigibody = GetComponent&lt;Rigidbody&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Update is called once per frame</span><br><span class="line">    void Update() &#123;</span><br><span class="line">        //获取用户输入</span><br><span class="line">        horizontal = Input.GetAxis(&quot;Horizontal&quot;);</span><br><span class="line">        vertical = Input.GetAxis(&quot;Vertical&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void FixedUpdate() &#123;</span><br><span class="line">        //将用户输入组成3D运动需要的三维矢量</span><br><span class="line">        m_Movement.Set(horizontal, 0.0f,vertical);</span><br><span class="line">        //在移动时，会有动画，动画移动距离和实际距离很有可能不匹配</span><br><span class="line">        //比如动画里迈一大步，实际只移动一点点</span><br><span class="line">        //所以把实际移动距离用以下函数设置为1，不考虑。</span><br><span class="line">        //只考虑动画移动距离</span><br><span class="line">        m_Movement.Normalize();</span><br><span class="line"></span><br><span class="line">        //先判断是否有横向移动,用前面说过的数学的方法</span><br><span class="line">        bool hasHorizontal = !Mathf.Approximately(horizontal, 0.0f);</span><br><span class="line">        bool hasVertical = !Mathf.Approximately(vertical, 0.0f);</span><br><span class="line">        //只要有一个方向移动,就认为玩家角色处于移动状态</span><br><span class="line">        bool isWalking = hasHorizontal || hasVertical;</span><br><span class="line">        //将变量传递给动画管理器</span><br><span class="line">        m_Animator.SetBool(&quot;IsWalking&quot;, isWalking);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void OnAnimatorMove() &#123;</span><br><span class="line">        //使用从用户输入获取到的三维矢量作为移动方向，使用动画中每次0.02秒移动的距离作为距离来移动</span><br><span class="line">        //m_Animator.deltaPosition.magnitude动画里面每一帧移动的距离</span><br><span class="line">        m_rigibody.MovePosition(m_rigibody.position + m_Movement * m_Animator.deltaPosition.magnitude);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Cleve_baby/article/details/119037731">关于Animator中的SetBool和SetTrigger的理解</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2018.1/ScriptReference/Animator.SetBool.html">SetBool的脚本API</a></p>

        </div>
    

</div>
            
        </section>
    </div>
</div>



    <div class="row">
        <div class="col-sm-12">
            <div class="wrap-pagination">
                <a class="disabled" href="/">
                    <i class="fa fa-chevron-left" aria-hidden="true"></i>
                </a>
                <a class="" href="/page/2/">
                    <i class="fa fa-chevron-right" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>




</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    This theme was developed by <a target="_blank" rel="noopener" href="https://github.com/klugjo">Jonathan Klughertz</a>. The source code is available on Github. Create Websites. Make Magic.
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2022/05/28/%E5%83%8F%E7%B4%A0%E7%94%BB%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">像素画学习笔记</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/05/28/3D%E5%90%8E%E6%9C%9F%E7%89%B9%E6%95%88%E6%B7%BB%E5%8A%A0%E7%8E%AF%E5%85%89%E9%81%AE%E6%8C%A1%EF%BC%8C%E9%95%9C%E5%A4%B4%E5%A4%B1%E7%9C%9F%EF%BC%8C%E6%B8%90%E6%99%95-11/">3D后期特效添加环光遮挡，镜头失真，渐晕-11</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/05/27/3D%E5%90%8E%E6%9C%9F%E5%A4%84%E7%90%86%E4%BD%93%E7%A7%AF-%E6%B7%BB%E5%8A%A0%E9%A2%9C%E8%89%B2%E5%88%86%E7%BA%A7-%E6%B3%9B%E5%85%89-10/">3D后期处理体积&amp;添加颜色分级&amp;泛光-10</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/05/26/3D%E5%90%8E%E6%9C%9F%E7%89%B9%E6%95%88%E7%AE%80%E4%BB%8B-%E6%B7%BB%E5%8A%A0%E6%8A%97%E9%94%AF%E9%BD%BF-9/">3D后期特效简介&amp;添加抗锯齿-9</a>
            </li>
            
        </ul>
    </div>



            
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://github.com/klugjo/hexo-theme-alpha-dust">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://twitter.com/?lang=en">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://www.facebook.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://www.instagram.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://dribbble.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://telegram.org/">
                            <span class="footer-icon-container">
                                <i class="fa fa-telegram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://www.behance.net/">
                            <span class="footer-icon-container">
                                <i class="fa fa-behance"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://500px.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-500px"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:test@example.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a target="_blank" rel="noopener" href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->

<script src="/js/main.js"></script>


<!-- Disqus Comments -->



</body>

</html>