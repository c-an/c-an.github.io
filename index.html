<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    

    <!--Author-->
    
        <meta name="author" content="John Doe">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="c-an"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="c-an"/>

    <!--Type page-->
    
        <meta property="og:type" content="website" />
    

    <!--Page Cover-->
    

    
        <meta name="twitter:card" content="summary" />
    
    
    

    <!-- Title -->
    
    <title>c-an</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/style.css">


    <!-- Google Analytics -->
    


<meta name="generator" content="Hexo 6.1.0"></head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/tags">
                    Tags
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/categories">
                    Categories
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
            <h1 id="main-title" class="title">c-an</h1>
        
    </div>
</header>

        <section class="main">
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/25/3D%E4%BD%BF%E7%94%A8Cinemachine%E6%9E%84%E5%BB%BA3D%E6%91%84%E5%83%8F%E6%9C%BA%E8%B7%9F%E9%9A%8F-8/">
                3D使用Cinemachine构建3D摄像机跟随-8
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-25</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>Cinemachine&gt;Create Virtual Camera（以前做2D的时候用的是Create 2D Camera）</p>
<p>创建好了虚拟摄像机，要跟随玩家，直接把Hierarchy中的玩家角色拖到虚拟射线机CinemachineVirtualCamera的Follow中就好了</p>
<blockquote>
<p>Aim是调整转向的，这里不需要调整转向，把Aim后选中Do nothing（因为是Follow，所以是Do nothing）<br>把虚拟摄像机中的Body改成Framing Transposer（可以为虚拟摄像机提供关于其Follow目标必须在屏幕上所处的位置的规则，从而控制虚拟摄像机的位置）（蓝色是核心的区域，黄色是定位点）</p>
</blockquote>
<blockquote>
<p>为了让摄像机离主角近一点，选中摄像机，Body&gt;Camera Distance更改为8（随意）</p>
</blockquote>
<h1 id="Cinemachine在3D游戏中的使用"><a href="#Cinemachine在3D游戏中的使用" class="headerlink" title="Cinemachine在3D游戏中的使用"></a>Cinemachine在3D游戏中的使用</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>Cinemachine是一套用于操作Unity摄像机的模块。Cinemachine解决了跟踪目标、合成、混合镜头之间剪切的复杂数学和逻辑。它旨在显着减少开发过程中发生的耗时的手动操作和脚本修订的数量。</p>
<p>这些模块的纯虚性质使Cinemachine具有抗错误性。调整（例如，更改场景中的动画、车辆速度、地形或其他游戏对象）时，Cinemachine会动态调整其行为以制作最佳镜头。例如，没有必要仅仅因为角色向左转而不是向右转而重新编写相机脚本。</p>
<p>Cinemachine可在所有类型（包括FPS、第三人称、2D、横向卷轴、自上而下和RTS）中实时运行。可以在场景中支持任意数量的镜头。模块化系统可以来组合复杂的行为。</p>
<p>Cinemachine与其他Unity工具配合良好，可作为时间轴、动画和后期处理资产的强大补充。创建自己的扩展将与自定义相机脚本集成。</p>
<h2 id="Cinemachine的虚拟摄像机"><a href="#Cinemachine的虚拟摄像机" class="headerlink" title="Cinemachine的虚拟摄像机"></a>Cinemachine的虚拟摄像机</h2><p>Chinemachine不会创建新的摄像机。相反，它会引导单个Unity进行拍摄。可以使用虚拟相机构图成这些镜头。虚拟摄像机移动和旋转Unity相机并控制其设置。</p>
<p>虚拟摄像机是独立与Unity摄像机的独立游戏对象，并独立运行，它们不相互嵌套</p>
<p>虚拟摄像机的主要任务：</p>
<ul>
<li>在场景中定位Unity摄像机</li>
<li>将Unity相机对准某物</li>
<li>向Unity相机中添加程序噪声。噪声模拟诸如手持效果或车辆抖动之类的东西。</li>
</ul>
<p>Cinemachine鼓励创建多个虚拟摄像机。虚拟摄像机旨在消耗很少的处理能力。如果对场景的性能很敏感，请在任何给定时刻停用除基本虚拟摄像机以外的所有摄像机以获得最佳性能。</p>
<p>建议使用单个虚拟摄像机进行单次拍摄。利用这一点来创建戏剧性或微妙的切割或混合</p>
<h2 id="Cinemachine-Brain"><a href="#Cinemachine-Brain" class="headerlink" title="Cinemachine Brain"></a>Cinemachine Brain</h2><p>如其名称，是操纵所有虚拟的Cinmachine摄像机的大脑</p>
<p>使用Cinmachine Brain实时响应动态游戏事件。它允许游戏逻辑通过操纵优先级来控制摄像机（自动）</p>
<p>也可以手动使用事件轴在可预测的情况下编排摄像机，例如过场动画。</p>
<h2 id="移动和瞄准"><a href="#移动和瞄准" class="headerlink" title="移动和瞄准"></a>移动和瞄准</h2><p>使用Virtual Camera中的Body属性指定如何在场景中移动它。使用Aim属性指定如何旋转它</p>
<p>虚拟摄像机有两个目标：</p>
<ul>
<li>在跟踪目标指定虚拟相机与移动游戏物体</li>
<li>在查找目标指定游戏对象瞄准</li>
</ul>
<p>Cinemachine 包括各种程序算法来控制移动和瞄准。每个算法都解决一个待定的问题，并根据您特定需求自定义算法的属性。Cinmaechine将这些算法实现，为CinemachineComponent对象。使用CinemachineComponent该类来实现自定义移动或瞄准行为。</p>
<h2 id="Cinemachine使用简介"><a href="#Cinemachine使用简介" class="headerlink" title="Cinemachine使用简介"></a>Cinemachine使用简介</h2><ul>
<li>在场景中创建一个或多个虚拟摄像机</li>
<li>使用Follow属性指定要跟随的GameObject；使用Look At属性指定虚拟摄像机应该瞄准的游戏对象</li>
<li>Cinemachine Brain与Camera组件连接到相同的游戏对象，默认情况下，这个游戏对象将是Main Camera游戏对象</li>
<li>Cinemachine Brain管理所有虚拟摄像机，并确定实际摄像机应该跟随哪个虚拟摄像机（或摄像机的组合）</li>
</ul>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/24/3DNavMesh%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F-7/">
                3DNavMesh导航系统-7
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-24</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="NavMesh导航网格实现简单AI"><a href="#NavMesh导航网格实现简单AI" class="headerlink" title="NavMesh导航网格实现简单AI"></a>NavMesh导航网格实现简单AI</h1><p>导航系统允许从场景几何体自动创建的导航网格来创建课再游戏世界中智能移动的角色，动态障碍物可以在运行时更改角色的导航，而网格外链接（Off-Mesh Link）可以构建特定的动作，如打开门或从窗台跳下。</p>
<h1 id="Unity中的导航系统组成"><a href="#Unity中的导航系统组成" class="headerlink" title="Unity中的导航系统组成"></a>Unity中的导航系统组成</h1><ol>
<li>导航网格（即Navigation Mesh，缩写为NavMesh），是一种数据结构，用于描述游戏世界的可行走表面，并允许在游戏世界中寻找一个可行走位置到另一个可行走位置的路径。该数据结构是从关卡几何体自动构建或烘培的。</li>
<li>导航网格代理（NavMesh Agent）组件：可用来创建朝目标角色移动时能彼此避开的角色。代理使用网络导航来推断游戏世界，并知道如何避开彼此以及移动的障碍物。</li>
<li>网格外链接（Off-Mesh Link）组件：允许合并无法使用可行走表面来表示的导航捷径。例如，跳过沟渠或围栏，或在通过门之间打开门，全都可以描述为导航外链接。</li>
<li>导航网格障碍物（NavMesh Obstacle）组件：可用于描述代理在世界中导航时应该避开的障碍物，由物理系统控制的木桶或是板条箱便是障碍物的典型例子。障碍物正在移动时，代理将尽力避开它，障碍物一旦变为静止状态，便会在导航网格中雕刻一个孔，从而使代理能够改变自己的路径来绕过它，或者如果静止的障碍物阻挡了路径，则代理可寻找其他不同的路线。</li>
</ol>
<h1 id="添加导航网格"><a href="#添加导航网格" class="headerlink" title="添加导航网格"></a>添加导航网格</h1><p>导航网格（NavMesh）是在地面上不可见的形状，定义了一个可以让选定游戏对象在其中移动的区域。</p>
<p>当某个对象表示为Static时，Unity的导航系统会认为该游戏对象不会移动。游戏环境由许多对象和许多Mesh Render（网格渲染器）组件组成。来自Mesh Renderer组件（其游戏对象被标记为Static）的所有网格将组合构成导航网格的基础</p>
<p>步骤：</p>
<ol>
<li>在level中，配置需要设置导航网格的游戏对象为Static（level是一个例子，选选中游戏对象，在Inspector勾选static即可）</li>
<li>烘培导航网格：选择Window&gt;AI&gt;Navigation以打开Navigation窗口&gt;选择Bake选项卡</li>
</ol>
<hr>
<p>游戏对象是被Mesh Renderer（网格渲染器）,渲染出来的，渲染出来的网格同时也可用作导航网格（NavMesh），静态的适合做导航网格</p>
<h1 id="关于Navigation"><a href="#关于Navigation" class="headerlink" title="关于Navigation"></a>关于Navigation</h1><ul>
<li>Agents是应用到哪些物理上的设置</li>
<li>Areas 是设置导航区域</li>
<li>Bake是烘培，把当前设置好的导航网格建立到场景中</li>
</ul>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/21/%E3%80%8ACunning-Angel%E3%80%8B/">
                《Cunning Angel》
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-21</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="《Cunning-Angle》"><a href="#《Cunning-Angle》" class="headerlink" title="《Cunning Angle》"></a>《Cunning Angle》</h1><blockquote>
<p>中文名：狡黠天使<br>游戏类型：剧情解密游戏</p>
</blockquote>
<h1 id="背景设定"><a href="#背景设定" class="headerlink" title="背景设定"></a>背景设定</h1><p>这里是流刑地，除你之外，有两个看守你的人。</p>
<p>前2202年，5月21日，12点零05分。</p>
<p>停滞的时间、死亡的恒星、漫天飞舞的黄沙、难以用人体感知系统去察觉的温度…</p>
<p>拼凑的天空中回响着断断续续、割离虚裂的诡异声音，封闭的空间、狭小的世界。</p>
<p>不要留下来，但要如何离开？</p>
<h1 id="角色设定"><a href="#角色设定" class="headerlink" title="角色设定"></a>角色设定</h1><blockquote>
<p>石榴–沙漠星空的看守者，足边缠绕着九头蛇。无感知系统，变温物。<br>塞涅–摇光海岸的看守者，听觉异常敏感。</p>
</blockquote>
<h1 id="物品道具"><a href="#物品道具" class="headerlink" title="物品道具"></a>物品道具</h1><ol>
<li>迷途碎片–“磁性物质，对稳定电波有一定的作用”</li>
<li>沙漠之火–“永恒不变的温度，36.5℃，蓝紫色火焰”</li>
<li>星屑–“死亡恒星上飘落下的碎片，易溶于水”</li>
<li>竖琴–“”</li>
</ol>
<h1 id="场景地图"><a href="#场景地图" class="headerlink" title="场景地图"></a>场景地图</h1><ol>
<li><p>沙漠星空–“气体系数低，平衡系数高。沙漠上的温度在较高的范围内小幅度波动，直到随海波上升至某一临界点，温度急剧下降并并维持低温。”</p>
</li>
<li><p>摇光海岸–“气体系数高，平衡系数无限接近0。摇光海岸的海水是不流动的，但因海水的纯度极高，仅由一种无机盐构成，这里洁净如镜。”</p>
</li>
<li><p>无尽回廊</p>
</li>
<li><p>白色房间</p>
</li>
</ol>
<h1 id="游戏模式"><a href="#游戏模式" class="headerlink" title="游戏模式"></a>游戏模式</h1><p>游戏以探索为主，以故事情节为核心，以第三人称视角进行，通过收集道具和探索场景，玩家发现总结，逐步认知到“流刑地”存在的无意义、不合理。利用世界规则的漏洞，制造混乱，打破建立于虚无中的平衡，使“流刑地”趋向于“不存在”。</p>
<h1 id="成就系统"><a href="#成就系统" class="headerlink" title="成就系统"></a>成就系统</h1><h1 id="解说与攻略"><a href="#解说与攻略" class="headerlink" title="解说与攻略"></a>解说与攻略</h1><p>石榴与塞涅各自代表混沌的沙漠与死亡的海水。</p>
<p>流刑地虽然是被“世界”这个系统创造的，但是是随机生成的。没有完美的规则，必有被攻击的破绽。</p>
<p>就连石榴和塞涅也是这个系统的产物，一成不变的思维，偏执、固执。</p>
<p>这里，没有时间的概念，这里，没有生存的意义。</p>
<p>因为是被设计好的规则，所以有必然得到的答案。</p>
<p>背景设定是随机数，流刑地是随机数，这里的一切以随机的数字来衡量。</p>
<h3 id="生物与死物"><a href="#生物与死物" class="headerlink" title="生物与死物"></a><strong>生物与死物</strong></h3><p>拾起一颗沙，松手它会做下坠的运动，这是名为重力的反应</p>
<p>割开仙人球，挤压它会流出粘液，这是名为渗透的反应</p>
<p>石榴呢，你的应激反应是什么？如何证明你和它们不是一类的生物？</p>
<h3 id="虚无与存在"><a href="#虚无与存在" class="headerlink" title="虚无与存在"></a><strong>虚无与存在</strong></h3><p>流刑地不需要额外的屏障，因为生成的世界就是流刑地本身。<br>与其说石榴和塞涅是来看守你的，不如说是在看守自己的行为。</p>
<p>其实你才是流刑地中最自由的，唯一一个来回穿梭沙漠星空与摇光海岸的人。</p>
<p>石榴与塞涅互不认识对方的存在，活动范围仅仅是各自的领地，并将自己的领地作为世界的中心。</p>
<p>两个领地，两种定理体系。</p>
<h1 id="剧本"><a href="#剧本" class="headerlink" title="剧本"></a>剧本</h1><p>-[背景1，自定义]</p>
<pre><code>你，是？

（玩家输入自己的名字）
</code></pre>
<p>[动态背景1，像睁开眼睛那样，背景1上下褪去，此时进入“沙漠星空”]</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/21/3D%E5%9C%BA%E6%99%AF%E5%92%8C%E5%85%89%E7%85%A7-6/">
                3D场景和光照-6
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-21</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="为环境设置光照"><a href="#为环境设置光照" class="headerlink" title="为环境设置光照"></a>为环境设置光照</h1><p>Unity中的光源只是添加了Light组件的游戏对象。光源组件包含一些设置可用于更改光源的颜色和强度，还有光源的“类型”以及各种用于阴影和光照贴图（Lightmapping）的更复杂的控制。</p>
<p>Unity中的每个新场景都分配的<strong>方向光（Directional Light）</strong>，这是默认创建的两个游戏对象之一。</p>
<h1 id="Unity光照相关光源概念简介"><a href="#Unity光照相关光源概念简介" class="headerlink" title="Unity光照相关光源概念简介"></a>Unity光照相关光源概念简介</h1><ul>
<li>直接和间接光照</li>
</ul>
<ol>
<li>直射光是发出后照射到表面一次再被直接反射到传感器（例如眼睛的视网膜或摄像机）中的光</li>
<li>间接光是当直射光从表面反弹时产生的额外光，是最终反射到传感器中的所有其他光线，包括多次照射到表面的光线和天光</li>
</ol>
<p>Unity使用什么直接还是间接光照技术，取决于项目的配置方式</p>
<ul>
<li>实时光照和烘培光照</li>
</ul>
<ol>
<li>实时光照：指Unity在运行时计算光照</li>
<li>烘培光照：指Unity提前执行光照计算并将结果保存为光照数据，然后在运行时应用</li>
<li>混合光照：实时光照、烘培光照两者的混合</li>
</ol>
<p>在Unity中，项目可以使用实时光照、烘培光照或两者的混合（称为混合光照），用来设置光源的模式（Mode）</p>
<h1 id="Unity中的光源类型Type"><a href="#Unity中的光源类型Type" class="headerlink" title="Unity中的光源类型Type"></a>Unity中的光源类型Type</h1><p>光源：为了计算受光照影响的游戏对象的阴影效果，Unity需要知道落在游戏对象上光的强度、方向和颜色。该信息由光源提供。</p>
<ol>
<li>Direction light方向光<br>这种光源位于无限远的位置，比如太阳光</li>
</ol>
<p>方向光对位于在场景中创建诸如阳光的效果非常有用。方向光在许多方面表现得很像太阳光，可视为无限远处的光源。方向光没有任何可识别方向的（？）因此光源对象可以放置在场景中的任何位置。场景中的所有对象都被照亮，就像光线始终来自同一方向一样。光源与目标对象的距离是未定义的，</p>
<p>方向光代表来自游戏世界范围之外的大型远处光源。在逼真的场景中，方向光可用于模拟太阳或月亮，要为对象添加无需指定光源的来源，方向光是一种很有用的方法。</p>
<p>旋转默认方向光（或“太阳”）会导致“天空盒”更新，使光线与侧面成一定角度，与地面平行，便可实现日落效果。此外，将光源指向上方会使天空是夜晚一样。如果光线从上到下成一定角度，天空将像白昼。</p>
<p>如果选择天空盒作为环境光源，那么环境光源将根据这些颜色进行更改。<br>2. Point light点光源<br>光源位于场景中的一个点，并在所有方向上均发光</p>
<p>点光源位于空间中的一个点，并在所有方向上均发光。照射到表面的光线的方向是从接触点返回到光源对象中心的线。强度随着远离光源而衰减。光照强度与距光距离的平方成反比。这被称为“平方反比定律”，类似于光在现实世界中的情况。</p>
<p>点光源可用于模拟场景中的灯和其他局部光源。还可以用来逼真地模拟火花爆炸照亮周围环境。</p>
<ol start="3">
<li>Area light面光源<br>这种光源由场景中的矩形定义，并沿表面区域均匀地向所有方向发光，但仅从矩面所在的面发射</li>
</ol>
<p>面光源是通过空间中的矩形来定义的。光线在表面区域上均匀地向所有方向上发射，但仅从矩形所在的面发射。无法手动控制光源的范围。强度将按照距离的平方呈反比衰减。由于光线计算处理对处理器性能消耗较大，因此面光源不可以实时处理，只能烘培到光照贴图中。</p>
<p>由于面光源同时从几个不同方向照亮对象，因此阴影趋向于比其他类型的光源更细腻、柔和。可以使用面光源来创建逼真的路灯或靠近玩家的一排..光源可以模拟较小的光源（例如室内光照），但效果比点光源更逼真。</p>
<ol start="4">
<li>Spot light聚光灯<br>这种光源位于场景中的一个点，并以锥体形状发光。</li>
</ol>
<p>像点光源一样，聚光灯具有指定的位置和光线衰减范围。不同的是聚光灯有一个角度约束、形成锥形的光照区域。锥体的中心指向光源对象的发光。聚光灯锥体边缘的光线也会衰减。加宽该角度会增加锥体的宽度，并随之增加这种淡化的效果，称为“半影”。</p>
<p>聚光灯通常用于人造光源，例如手电筒、汽车前照灯和探照灯。通过脚本或动画控制方向，移动聚光灯将照亮场景的一小块区域并产生舞台风格的效果。</p>
<h1 id="Light组件"><a href="#Light组件" class="headerlink" title="Light组件"></a>Light组件</h1><p>不同的渲染管线，Unity在Inspector中显示不同的属性。</p>
<h1 id="Lighting窗口"><a href="#Lighting窗口" class="headerlink" title="Lighting窗口"></a>Lighting窗口</h1><p>Lighting窗口（菜单：Window&gt;Rendering&gt;Lighting）是当前项目的总体光照设置。</p>
<p>使用Lighting窗口调整与场景中的光照有关设置，并根据质量、烘培时间和存储空间来优化预计算的光照数据。</p>
<h1 id="Light-Explorer窗口"><a href="#Light-Explorer窗口" class="headerlink" title="Light Explorer窗口"></a>Light Explorer窗口</h1><p>在Light Explorer窗口中可选择和编辑光源。要从菜单中打开Light Explorer窗口，请导航至Window&gt;Rendering&gt;Light Explorer</p>
<h1 id="光照贴图"><a href="#光照贴图" class="headerlink" title="光照贴图"></a>光照贴图</h1><p>光照贴图过程将预先计算场景中表面的亮度，并将结果存储在称为“光照贴图”的纹理中供以后使用。</p>
<h1 id="光照探针"><a href="#光照探针" class="headerlink" title="光照探针"></a>光照探针</h1><p>通过<strong>光照探针</strong>可以捕获并使用穿过场景空白空间的光线相关信息</p>
<p>与光照贴图类似，光照探针存储了有关场景中的光照的“烘培”信息。不同之处在于，光照贴图存储的是有关光线照射到场景中的表面的光照贴图信息，而光照探针存储的是有关光线穿过场景中的空白空间的信息。</p>
<p>光照探针是在烘培期间测量（探测）光照的场景位置。在运行时，系统将使用距离动态游戏对象最近的探针的值来估算照射到这些对象的间接光。</p>
<ul>
<li>用途：</li>
<li>光照探针的主要用途是为场景中移动的对象提供高质量的光照（包括间接反射光）</li>
<li>光照探针的次要用途是在静态景物使用Unity的LOD（细节级别）系统时提供该景物的光照信息。</li>
</ul>
<hr>
<p>下面开始实操：</p>
<blockquote>
<p>更改光照的颜色</p>
</blockquote>
<ol>
<li>在Hierarchy窗口中,选择Directional Light游戏对象</li>
<li>更改Light组件的某些属性值</li>
</ol>
<p>名词介绍:</p>
<ul>
<li>Intensity 亮度</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2020.3/Manual/class-Light.html">光源手册</a></p>
<hr>
<p>配置全局的光照,需要打开Window&gt;Rendering&gt;Lighting</p>
<ul>
<li>Sky,用于控制从场景上方发出的环境光</li>
<li>Equator,用于控制从地平线向场景中间传播的光线</li>
<li>Ground,用于控制从场景下方发出的光线</li>
</ul>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/20/3D%E6%8E%A7%E5%88%B6%E6%97%8B%E8%BD%AC-5/">
                3D控制旋转-5
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-20</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>以下是控制旋转+控制移动的完整代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerMovement : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    //TODO:</span><br><span class="line">    //1. 获取玩家输入，在场景中移动玩家角色游戏对象</span><br><span class="line">    //2. 移动时，除了位置position外，还需要考虑转动rotation</span><br><span class="line">    //3. 需要将动画也考虑进去</span><br><span class="line"></span><br><span class="line">    //创建一个3D矢量，来表示玩家角色的移动</span><br><span class="line">    Vector3 m_Movement;</span><br><span class="line">    //创建变量，获取用户输入的方向</span><br><span class="line">    float horizontal;</span><br><span class="line">    float vertical;</span><br><span class="line"></span><br><span class="line">    //创建一个刚体对象</span><br><span class="line">    Rigidbody m_rigibody;</span><br><span class="line">    //创建一个Animator组件对象</span><br><span class="line">    Animator m_Animator;</span><br><span class="line"></span><br><span class="line">    //用四元数对象 m_Rotaion来表示3D游戏中的旋转</span><br><span class="line">    //初始化四元数对象，初始化为不旋转</span><br><span class="line">    Quaternion m_Rotation = Quaternion.identity;</span><br><span class="line"></span><br><span class="line">    //旋转速度</span><br><span class="line">    public float turnSpeed = 20.0f;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // Start is called before the first frame update</span><br><span class="line">    void Start() &#123;</span><br><span class="line">        //在游戏运行开始后，获取到刚体组件和动画管理者组件</span><br><span class="line">        m_Animator = GetComponent&lt;Animator&gt;();</span><br><span class="line">        m_rigibody = GetComponent&lt;Rigidbody&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Update is called once per frame</span><br><span class="line">    void Update() &#123;</span><br><span class="line">        //获取用户输入</span><br><span class="line">        horizontal = Input.GetAxis(&quot;Horizontal&quot;);</span><br><span class="line">        vertical = Input.GetAxis(&quot;Vertical&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void FixedUpdate() &#123;</span><br><span class="line">        //将用户输入组成3D运动需要的三维矢量</span><br><span class="line">        m_Movement.Set(horizontal, 0.0f,vertical);</span><br><span class="line">        //在移动时，会有动画，动画移动距离和实际距离很有可能不匹配</span><br><span class="line">        //比如动画里迈一大步，实际只移动一点点</span><br><span class="line">        //所以把实际移动距离用以下函数设置为1，不考虑。</span><br><span class="line">        //只考虑动画移动距离</span><br><span class="line">        m_Movement.Normalize();</span><br><span class="line"></span><br><span class="line">        //先判断是否有横向移动,用前面说过的数学的方法</span><br><span class="line">        bool hasHorizontal = !Mathf.Approximately(horizontal, 0.0f);</span><br><span class="line">        bool hasVertical = !Mathf.Approximately(vertical, 0.0f);</span><br><span class="line">        //只要有一个方向移动,就认为玩家角色处于移动状态</span><br><span class="line">        bool isWalking = hasHorizontal || hasVertical;</span><br><span class="line">        //将变量传递给动画管理器</span><br><span class="line">        m_Animator.SetBool(&quot;IsWalking&quot;, isWalking);</span><br><span class="line"></span><br><span class="line">        //用三维矢量来表示转向后玩家角色的朝向</span><br><span class="line">        Vector3 desiredForward = Vector3.RotateTowards(transform.forward, m_Movement, turnSpeed * Time.deltaTime, 0f);</span><br><span class="line"></span><br><span class="line">        //设置四元数对象的值</span><br><span class="line">        //调用Quaternion.LookRotation的静态方法，把三维矢量作为参数传进去</span><br><span class="line">        m_Rotation = Quaternion.LookRotation(desiredForward);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void OnAnimatorMove() &#123;</span><br><span class="line">        //使用从用户输入获取到的三维矢量作为移动方向，使用动画中每次0.02秒移动的距离作为距离来移动</span><br><span class="line">        //m_Animator.deltaPosition.magnitude动画里面每一帧移动的距离</span><br><span class="line">        m_rigibody.MovePosition(m_rigibody.position + m_Movement * m_Animator.deltaPosition.magnitude);</span><br><span class="line"></span><br><span class="line">        //旋转游戏对象</span><br><span class="line">        m_rigibody.MoveRotation(m_Rotation);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2020.3/ScriptReference/Vector3.RotateTowards.html">RotateTowards的脚本API</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2020.3/ScriptReference/Quaternion.LookRotation.html">LookRotation的脚本API</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2020.3/ScriptReference/Quaternion.html">Quaternion的脚本API</a></p>
<blockquote>
<p>当动画播放引发跟移动时执行OnAnimatorMove()</p>
</blockquote>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/19/3D%E6%8E%A7%E5%88%B6%E7%A7%BB%E5%8A%A8-4/">
                3D控制移动-4
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-19</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>以下是控制JohnLemon移动的代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerMovement : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    //TODO:</span><br><span class="line">    //1. 获取玩家输入，在场景中移动玩家角色游戏对象</span><br><span class="line">    //2. 移动时，除了位置position外，还需要考虑转动rotation</span><br><span class="line">    //3. 需要将动画也考虑进去</span><br><span class="line"></span><br><span class="line">    //创建一个3D矢量，来表示玩家角色的移动</span><br><span class="line">    Vector3 m_Movement;</span><br><span class="line">    //创建变量，获取用户输入的方向</span><br><span class="line">    float horizontal;</span><br><span class="line">    float vertical;</span><br><span class="line"></span><br><span class="line">    //创建一个刚体对象</span><br><span class="line">    Rigidbody m_rigibody;</span><br><span class="line">    //创建一个Animator组件对象</span><br><span class="line">    Animator m_Animator;</span><br><span class="line"></span><br><span class="line">    // Start is called before the first frame update</span><br><span class="line">    void Start() &#123;</span><br><span class="line">        //在游戏运行开始后，获取到刚体组件和动画管理者组件</span><br><span class="line">        m_Animator = GetComponent&lt;Animator&gt;();</span><br><span class="line">        m_rigibody = GetComponent&lt;Rigidbody&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Update is called once per frame</span><br><span class="line">    void Update() &#123;</span><br><span class="line">        //获取用户输入</span><br><span class="line">        horizontal = Input.GetAxis(&quot;Horizontal&quot;);</span><br><span class="line">        vertical = Input.GetAxis(&quot;Vertical&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void FixedUpdate() &#123;</span><br><span class="line">        //将用户输入组成3D运动需要的三维矢量</span><br><span class="line">        m_Movement.Set(horizontal, 0.0f,vertical);</span><br><span class="line">        //在移动时，会有动画，动画移动距离和实际距离很有可能不匹配</span><br><span class="line">        //比如动画里迈一大步，实际只移动一点点</span><br><span class="line">        //所以把实际移动距离用以下函数设置为1，不考虑。</span><br><span class="line">        //只考虑动画移动距离</span><br><span class="line">        m_Movement.Normalize();</span><br><span class="line"></span><br><span class="line">        //先判断是否有横向移动,用前面说过的数学的方法</span><br><span class="line">        bool hasHorizontal = !Mathf.Approximately(horizontal, 0.0f);</span><br><span class="line">        bool hasVertical = !Mathf.Approximately(vertical, 0.0f);</span><br><span class="line">        //只要有一个方向移动,就认为玩家角色处于移动状态</span><br><span class="line">        bool isWalking = hasHorizontal || hasVertical;</span><br><span class="line">        //将变量传递给动画管理器</span><br><span class="line">        m_Animator.SetBool(&quot;IsWalking&quot;, isWalking);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void OnAnimatorMove() &#123;</span><br><span class="line">        //使用从用户输入获取到的三维矢量作为移动方向，使用动画中每次0.02秒移动的距离作为距离来移动</span><br><span class="line">        //m_Animator.deltaPosition.magnitude动画里面每一帧移动的距离</span><br><span class="line">        m_rigibody.MovePosition(m_rigibody.position + m_Movement * m_Animator.deltaPosition.magnitude);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Cleve_baby/article/details/119037731">关于Animator中的SetBool和SetTrigger的理解</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2018.1/ScriptReference/Animator.SetBool.html">SetBool的脚本API</a></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/18/3DJohnLemon%E6%B7%BB%E5%8A%A0%E7%A2%B0%E6%92%9E%E4%BD%93/">
                3DJohnLemon添加碰撞体和控制移动
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-18</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>3D里为人物添加的碰撞体一般为Capsule（胶囊） Collider，其中的中心默认位置Center是脚底</p>
<p>如2D一样，这里把胶囊包裹人物全部（要用数值来更改胶囊包裹的话，修改Height和Radius）</p>
<p>添加控制它的脚本组件，按教程上名字就叫做PlayerMovement</p>
<p>类介绍：</p>
<blockquote>
<p> Normalize类：将magnitude设置为1.0。不考虑距离，只考虑方向了<br> Set：设置现有向量的X,Y,Z的值</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerMovement : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    //TODO:</span><br><span class="line">    //1. 获取玩家输入，在场景中移动玩家角色游戏对象</span><br><span class="line">    //2. 移动时，除了位置position外，还需要考虑转动rotation</span><br><span class="line">    //3. 需要将动画也考虑进去</span><br><span class="line"></span><br><span class="line">    //创建一个3D矢量，来表示玩家角色的移动</span><br><span class="line">    Vector3 m_Movement;</span><br><span class="line">    //创建变量，获取用户输入的方向</span><br><span class="line">    float horizontal;</span><br><span class="line">    float vertical;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // Start is called before the first frame update</span><br><span class="line">    void Start() &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Update is called once per frame</span><br><span class="line">    void Update() &#123;</span><br><span class="line">        //获取用户输入</span><br><span class="line">        horizontal = Input.GetAxis(&quot;Horizontal&quot;);</span><br><span class="line">        vertical = Input.GetAxis(&quot;Vertical&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void FixedUpdate() &#123;</span><br><span class="line">        //将用户输入组成3D运动需要的三维矢量</span><br><span class="line">        m_Movement.Set(horizontal, 0.0f,vertical);</span><br><span class="line">        //在移动时，会有动画，动画移动距离和实际距离很有可能不匹配</span><br><span class="line">        //比如动画里迈一大步，实际只移动一点点</span><br><span class="line">        //所以把实际移动距离用以下函数设置为1，不考虑。</span><br><span class="line">        //只考虑动画移动距离</span><br><span class="line">        m_Movement.Normalize();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/17/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86/">
                游戏开发底层原理
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-17</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <blockquote>
<p>学习路线：</p>
</blockquote>
<ul>
<li>数学基础</li>
<li>计算机图形学</li>
<li>图形库API（例如openGL（跨平台、简单），但openGL并不是图像学，不是图像本身，只是一个一个的接口）</li>
<li>游戏引擎架构</li>
</ul>
<h1 id="数学部分"><a href="#数学部分" class="headerlink" title="数学部分"></a>数学部分</h1><p>计算机图形学基础–《Fundamentals of Computer Graphics》，目前是第五版，没有中文版。</p>
<blockquote>
<p>许多图像只是将数学转化成代码，数学越清晰，得到的代码就越简洁。</p>
</blockquote>
<ul>
<li>线性代数基础</li>
</ul>
<ol>
<li>向量</li>
<li>笛卡尔坐标系</li>
<li>基向量</li>
<li>线性变换（改变基向量的大小来改变坐标）</li>
</ol>
<p>几种比较典型的线性变换：Scale比例、Rotate角度、Position位置。以上三者统成Transform变换</p>
<ol start="5">
<li>复合变换（矩阵的计算，四个数，第一个数就是横着的第一行乘以竖着的第一行；第二个数就是横着的第一行乘以竖着的第二行）</li>
</ol>
<blockquote>
<p>想改变矩阵的位置，该如何进行变换？用线性变换和复合变换的时候会有一些问题。</p>
</blockquote>
<ol start="6">
<li><p>齐次坐标：通过增加一个纬度，来区别是坐标还是向量</p>
</li>
<li><p>三维坐标（X、Y、Z、W）</p>
</li>
</ol>
<hr>
<ol start="8">
<li>四元数与旋转<blockquote>
<p>现在3D引擎里，最多用来描述旋转的方式是欧拉旋转。如果使用欧拉这种体系进行旋转时，当把两个纬度90°旋转，这个体系的问题就是会从3个自由度变成2个自由度，即万向节死锁。这种旋转遇到的问题不能精确描述的话，这时加入一个纬度，用四元数。用四个纬度进行旋转，这是更为精确的</p>
</blockquote>
</li>
</ol>
<h1 id="渲染管线Render-PipeLine"><a href="#渲染管线Render-PipeLine" class="headerlink" title="渲染管线Render PipeLine"></a>渲染管线Render PipeLine</h1><p>阶段一：传入数据（传入GPU，GPU用上千个管道，适合做这种重复的工作）</p>
<ul>
<li>顶点坐标</li>
<li>顶点法向量</li>
<li>纹理坐标</li>
<li>灯光信息</li>
<li>UV</li>
<li>等等</li>
</ul>
<p>阶段二：顶点着色器</p>
<p>将顶点从模型空间坐标系统转化到屏幕空间坐标系统</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/17/3DJohnLemon-%E4%BD%BF%E8%A7%92%E8%89%B2%E5%AF%B9%E7%89%A9%E7%90%86%E4%BA%A7%E7%94%9F%E5%8F%8D%E5%BA%94-%E6%9B%B4%E6%94%B9%E5%8A%A8%E7%94%BBbug/">
                3DJohnLemon 动画与刚体之间的bug
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-17</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>在游戏对象后修改，若是要更新显回预制件。Inspector面板，Overrides会提示你是否返回预制件。Overrides中Rever All是把刚才操作还原，Apply All是覆盖预制件</p>
<blockquote>
<p>前提：JohnLemon有Rigidbody组件和Animator组件</p>
</blockquote>
<blockquote>
<p>Animator里游戏对象也可以进行动画的运动，设置动画的运动和刚体的物理运动产生冲突，会影响实体运动的位移。</p>
</blockquote>
<p>更改步骤：</p>
<ol>
<li>Inspector&gt;Animator&gt;Update Mode由Normal（默认的更新模式）更改为Animate Physics</li>
</ol>
<p><strong>Normal是用Update脚本进行动作更新，如果想要与Rigidbody进行统一，需要把刷新模式改成Animate Physics，这对应的刷新模式FixedUpdate，这和Rigidbody相同。学2D的时候也说了，Rigidbody的移动都放到FixedUpdate中，更适合</strong></p>
<ol start="2">
<li>在Rigidbody&gt;Constraints中把约束勾上。对于Freeze Position，把Y轴勾上，因为这个游戏角色不会往上升。对于Freeze Rotation（转向），X和Z勾上，因为这个角色只会沿Y轴左转或右转，不会往下磕头什么的</li>
</ol>
<h1 id="更新循环"><a href="#更新循环" class="headerlink" title="更新循环"></a>更新循环</h1><p><strong>更新循环</strong>是产生动画和刚体冲突的原因。<br>两个更新循环也就是Update和FixedUpdate</p>
<h1 id="根运动root-Motion"><a href="#根运动root-Motion" class="headerlink" title="根运动root Motion"></a>根运动root Motion</h1><p>在Inspector&gt;Animator,有个Apply Root Motion，打上对勾就是让动画中的任何移动体现在外部坐标中</p>
<p>先简单理解为，在Animator组件上启用Apply Root Motion，动画中的任何移动体现在外部场景世界坐标中。不启用，动画中的移动只会保留在动画中</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2022/05/15/3DJonhLemon%E6%B7%BB%E5%8A%A0%E7%8E%A9%E5%AE%B6%E8%A7%92%E8%89%B2%E5%8A%A8%E7%94%BB/">
                3DJonhLemon添加玩家角色动画
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-05-15</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>导入资源包，把玩家角色拖入到Hierarchy，点击这个素材下的一个同名子模型。</p>
<p>这个模型里面主要是一个大的Skinned Mesh Renderer（带蒙皮的网格渲染器）组件，用来显示3D模型，3D模型的外观配置。</p>
<blockquote>
<p>tips:Skinned Mesh Renderer是一种特殊类型的Mesh Renderer，可让网格根据模型所有骨骼的位置和旋转来改变形状。这些骨骼是模型的子游戏对象一JohnLemon的骨骼Root游戏对象的所有子对象</p>
</blockquote>
<blockquote>
<p>在Hierarchy中，选择Root游戏对象。按住Alt（windows）或Option（mas OS）并单击该游戏对象的名称左侧的箭头以展开所有子对象</p>
</blockquote>
<p>要把JohnLemon做成预制件，直接把它从Hierarchy窗口中拖到Prefabs文件夹里。</p>
<ol>
<li><p>进入预制件。对于JohnLemon这个游戏对象，动画Animator本身已经作为组件添加到游戏对象中了，骨骼Avatar也已经有了，缺少的是Controller。做一个Controller，把它放在那里好呢？点击Animation文件夹，里面有一个Animators文件夹，放在那里吧。点击Animators文件夹，右键，Create&gt;Animator Controller，命名为JohnLemon。把这个控制器添加到刚才JohnLemon预制件下本应该有的那个缺失的地方。</p>
</li>
<li><p>点击JohnLemon预制件，双击打开刚才添加的JohnLemon控制器。</p>
</li>
<li><p>做3D动画是一个比较复杂的过程，这个游戏已经有资源了，在Animation文件夹中。可以看到Aimation文件夹中有那个动画，要用到哪个，把它拖拽到第一步双击打开的JohnLemon的Animator中。</p>
</li>
<li><p>我先拖了一个John_Idle,然后拖了一个John_Walk，先拖的John_dle直接和Entry相连，作为起始的动画。</p>
</li>
<li><p>点击Animator面板中的John_Idle，右键，Make Transition，连到John_Walk；点击John_Walk,同样的方法连到John_Idle。这样，John_Idle和John_Walk相连了。</p>
</li>
<li><p>需要上面两个动画进行转化，转化的条件需要改一改</p>
</li>
<li><p>在Animator面板中的Parameters，点击“+”号，选择bool类型，起名字叫IsWorking吧，把它作为条件</p>
</li>
<li><p>点击John_Walk到John_Idle连线上带三角形的箭头，可以看到右边Inspector面板，Conditions可以点“+”号，让John_Idle到John_Walk为true。另一条线用同样的方法让它为false</p>
</li>
<li><p>同样在那个Inspector面板，有个Has Exit Time复选框，把它取消了，目的是为了让只有两个变量进行更改的时候，才会让它进行状态转换，不会用时间倒计时自动退出</p>
</li>
</ol>

        </div>
    

</div>
            
        </section>
    </div>
</div>



    <div class="row">
        <div class="col-sm-12">
            <div class="wrap-pagination">
                <a class="disabled" href="/">
                    <i class="fa fa-chevron-left" aria-hidden="true"></i>
                </a>
                <a class="" href="/page/2/">
                    <i class="fa fa-chevron-right" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>




</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    This theme was developed by <a target="_blank" rel="noopener" href="https://github.com/klugjo">Jonathan Klughertz</a>. The source code is available on Github. Create Websites. Make Magic.
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2022/05/25/3D%E4%BD%BF%E7%94%A8Cinemachine%E6%9E%84%E5%BB%BA3D%E6%91%84%E5%83%8F%E6%9C%BA%E8%B7%9F%E9%9A%8F-8/">3D使用Cinemachine构建3D摄像机跟随-</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/05/24/3DNavMesh%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F-7/">3DNavMesh导航系统-7</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/05/21/%E3%80%8ACunning-Angel%E3%80%8B/">《Cunning Angel》</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/05/21/3D%E5%9C%BA%E6%99%AF%E5%92%8C%E5%85%89%E7%85%A7-6/">3D场景和光照-6</a>
            </li>
            
        </ul>
    </div>



            
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://github.com/klugjo/hexo-theme-alpha-dust">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://twitter.com/?lang=en">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://www.facebook.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://www.instagram.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://dribbble.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://telegram.org/">
                            <span class="footer-icon-container">
                                <i class="fa fa-telegram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://www.behance.net/">
                            <span class="footer-icon-container">
                                <i class="fa fa-behance"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://500px.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-500px"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:test@example.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a target="_blank" rel="noopener" href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->

<script src="/js/main.js"></script>


<!-- Disqus Comments -->



</body>

</html>